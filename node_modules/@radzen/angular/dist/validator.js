"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var forms_1 = require("@angular/forms");
var document_token_1 = require("./document.token");
var form_component_1 = require("./form-component");
var template_form_1 = require("./template-form");
var ValidatorComponent = /** @class */ (function () {
    function ValidatorComponent(token, form) {
        this.token = token;
        this.form = form;
    }
    Object.defineProperty(ValidatorComponent.prototype, "component", {
        set: function (component) {
            if (component instanceof form_component_1.FormComponent) {
                component.registerValidator(this);
            }
        },
        enumerable: true,
        configurable: true
    });
    ValidatorComponent.prototype.applyTo = function (control) {
        var _this = this;
        var validator = control.validator;
        control.setValidators(forms_1.Validators.compose([
            validator,
            function (control) { return _this.validate(control); }
        ]));
        this.control = control;
    };
    /** @nocollapse */
    ValidatorComponent.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: core_1.Optional }, { type: core_1.Inject, args: [document_token_1.DOCUMENT_TOKEN,] },] },
        { type: template_form_1.TemplateFormComponent, decorators: [{ type: core_1.Host }, { type: core_1.Optional },] },
    ]; };
    ValidatorComponent.propDecorators = {
        "style": [{ type: core_1.Input },],
        "component": [{ type: core_1.Input },],
    };
    return ValidatorComponent;
}());
exports.ValidatorComponent = ValidatorComponent;
